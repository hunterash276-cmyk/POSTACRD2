<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Postcard">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#E07A5F">
  <title>Postcard</title>
  <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiUG9zdGNhcmQiLCJzaG9ydF9uYW1lIjoiUG9zdGNhcmQiLCJzdGFydF91cmwiOiIuIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiI0ZGRjlGNSIsInRoZW1lX2NvbG9yIjoiI0UwN0E1RiJ9">
  <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23E07A5F'/%3E%3Ctext x='50' y='55' text-anchor='middle' font-size='50'%3EğŸ“®%3C/text%3E%3C/svg%3E">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;user-select:none}
    html,body,#root{margin:0;padding:0;width:100%;min-height:100vh;font-family:-apple-system,BlinkMacSystemFont,sans-serif;overscroll-behavior:none}
    body{padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}
    input{-webkit-user-select:text;user-select:text}
    .tap{cursor:pointer}.tap:active{opacity:.7;transform:scale(.98)}
  </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const{useState}=React;
const FRIENDS=[{id:2,name:'Alex',initials:'A',color:'#E07A5F'},{id:3,name:'Jordan',initials:'J',color:'#81B29A'},{id:4,name:'Sam',initials:'S',color:'#F2CC8F'}];
const POSTS=[{id:1,friendId:2,date:'2025-01-20',location:'Tokyo, Japan',outfitPhoto:'https://images.unsplash.com/photo-1617137968427-85924c800a22?w=400&h=600&fit=crop',photo:'https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=600',song:{title:'Plastic Love',artist:'Mariya Takeuchi'},quote:'Lost in translation',reactions:[{emoji:'ğŸ”¥',friendId:3}]},{id:2,friendId:3,date:'2025-01-20',location:'Barcelona, Spain',outfitPhoto:'https://images.unsplash.com/photo-1507680434567-5739c80be1ac?w=400&h=600&fit=crop',photo:'https://images.unsplash.com/photo-1583422409516-2895a77efded?w=600',song:{title:'Agua',artist:'J Balvin'},quote:'',reactions:[]},{id:3,friendId:4,date:'2025-01-20',location:'Reykjavik, Iceland',outfitPhoto:'https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=400&h=600&fit=crop',photo:'https://images.unsplash.com/photo-1504893524553-b855bce32c67?w=600',song:{title:'HoppÃ­polla',artist:'Sigur RÃ³s'},quote:'The earth has music',reactions:[{emoji:'â¤ï¸',friendId:2}]}];
const MYPOSTS=[{id:101,date:'2025-01-18',friendId:1,location:'London, UK',outfitPhoto:'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=400&h=600&fit=crop',photo:'https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=600',song:{title:'London Calling',artist:'The Clash'},quote:'Rainy but beautiful',reactions:[]}];
const RX=['â¤ï¸','ğŸ”¥','ğŸ˜','ğŸ™Œ','âœˆï¸','ğŸ“¸'];
const L={bg:'#FFF9F5',card:'#FFF',text:'#2D2A26',muted:'#8B8680',border:'#E8E4DF',accent:'#E07A5F'};
const D={bg:'#1A1918',card:'#252422',text:'#F5F2EE',muted:'#8B8680',border:'#3D3A36',accent:'#E07A5F'};

function App(){
  const[dark,setDark]=useState(false);
  const[posted,setPosted]=useState(false);
  const[view,setView]=useState('feed');
  const[posts,setPosts]=useState(POSTS);
  const[myPosts,setMyPosts]=useState(MYPOSTS);
  const[sel,setSel]=useState(null);
  const[step,setStep]=useState(1);
  const[np,setNp]=useState({photo:null,outfit:null,songTitle:'',songArtist:'',loc:'',quote:''});
  const[showRx,setShowRx]=useState(null);
  const[calDate,setCalDate]=useState(new Date());
  const[dayPost,setDayPost]=useState(null);
  const t=dark?D:L;

  const nav=(v)=>{setView(v);setSel(null);setDayPost(null);};
  const upload=(e,k)=>{const f=e.target.files?.[0];if(f){const r=new FileReader();r.onloadend=()=>setNp(p=>({...p,[k]:r.result}));r.readAsDataURL(f);}};
  const submit=()=>{if(np.photo&&np.outfit&&np.songTitle&&np.songArtist&&np.loc){const p={id:Date.now(),date:new Date().toISOString().split('T')[0],friendId:1,location:np.loc,photo:np.photo,outfitPhoto:np.outfit,song:{title:np.songTitle,artist:np.songArtist},quote:np.quote,reactions:[]};setMyPosts(x=>[p,...x]);setPosts(x=>[p,...x]);setPosted(true);nav('feed');setStep(1);setNp({photo:null,outfit:null,songTitle:'',songArtist:'',loc:'',quote:''});}};
  const react=(id,em)=>{setPosts(ps=>ps.map(p=>{if(p.id!==id)return p;const i=p.reactions.findIndex(r=>r.friendId===1);let rx=[...p.reactions];if(i>=0){rx[i].emoji===em?rx.splice(i,1):rx[i]={emoji:em,friendId:1};}else{rx.push({emoji:em,friendId:1});}const u={...p,reactions:rx};if(sel?.id===id)setSel(u);return u;}));setShowRx(null);};
  const fr=id=>id===1?{id:1,name:'You',initials:'Y',color:t.accent}:FRIENDS.find(f=>f.id===id);
  const days=d=>({n:new Date(d.getFullYear(),d.getMonth()+1,0).getDate(),s:new Date(d.getFullYear(),d.getMonth(),1).getDay()});
  const fmtM=d=>d.toLocaleDateString('en-US',{month:'long',year:'numeric'});
  const getP=day=>myPosts.find(p=>p.date===`${calDate.getFullYear()}-${String(calDate.getMonth()+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`);
  const{n:daysN,s:startD}=days(calDate);
  const now=new Date();
  const isCur=calDate.getMonth()===now.getMonth()&&calDate.getFullYear()===now.getFullYear();

  return(
    <div style={{width:'100%',maxWidth:430,minHeight:'100vh',margin:'0 auto',fontFamily:'Outfit,-apple-system,sans-serif',background:t.bg}}>
      <style>{`@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap');@keyframes up{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-4px)}75%{transform:translateX(4px)}}@keyframes float{0%,100%{transform:translateY(0) rotate(-2deg)}50%{transform:translateY(-5px) rotate(2deg)}}.lock{animation:shake .5s}`}</style>

      {view==='feed'&&<div style={{minHeight:'100vh',paddingBottom:100}}>
        <header style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'16px 20px'}}>
          <div style={{display:'flex',alignItems:'center',gap:8}}><span style={{fontSize:26,fontWeight:700,color:t.text}}>postcard</span><span style={{fontSize:18,animation:'float 3s infinite'}}>âœˆï¸</span></div>
          <div style={{display:'flex',gap:8}}><span className="tap" onPointerDown={()=>nav('settings')} style={{fontSize:20,padding:8,color:t.muted}}>âš™ï¸</span><span className="tap" onPointerDown={()=>nav('profile')} style={{padding:8}}><div style={{width:36,height:36,borderRadius:12,background:t.accent,display:'flex',alignItems:'center',justifyContent:'center',fontSize:14,fontWeight:600,color:'#fff'}}>Y</div></span></div>
        </header>
        {!posted&&<div style={{margin:'0 20px 20px',padding:24,borderRadius:20,textAlign:'center',border:`2px dashed ${t.border}`,background:t.card}}><div style={{fontSize:40,marginBottom:8}}>ğŸ“®</div><p style={{color:t.text,margin:'0 0 14px',fontSize:15}}>Share your day to see friends' postcards</p><span className="tap" onPointerDown={()=>nav('post')} style={{display:'inline-block',color:'#fff',padding:'14px 28px',borderRadius:14,fontSize:15,fontWeight:600,background:t.accent}}>Send postcard âœ‰ï¸</span></div>}
        <div style={{padding:'0 20px',display:'flex',flexDirection:'column',gap:20}}>
          {posts.map((p,i)=>{const f=fr(p.friendId);const lock=!posted&&p.friendId!==1;return(
            <div key={p.id} className={lock?'lock':'tap'} onPointerDown={()=>!lock&&(setSel(p),setView('detail'))} style={{borderRadius:20,overflow:'hidden',border:`1px solid ${t.border}`,background:t.card,animation:`up .4s ${i*.1}s both`,transform:`rotate(${i%2?1.5:-1.5}deg)`}}>
              <div style={{position:'relative',aspectRatio:'1'}}><img src={p.photo} style={{width:'100%',height:'100%',objectFit:'cover',filter:lock?'blur(20px)':'none'}}/>{lock&&<div style={{position:'absolute',inset:0,display:'flex',alignItems:'center',justifyContent:'center',background:'rgba(0,0,0,.2)'}}><span style={{fontSize:36}}>ğŸ”’</span></div>}{!lock&&<div style={{position:'absolute',bottom:0,left:0,right:0,padding:'50px 16px 16px',background:`linear-gradient(transparent 40%,${t.card})`}}><div style={{display:'flex',alignItems:'center',gap:10}}><div style={{width:36,height:36,borderRadius:10,background:f?.color,display:'flex',alignItems:'center',justifyContent:'center',fontSize:14,fontWeight:600,color:'#fff'}}>{f?.initials}</div><div><p style={{margin:0,fontWeight:600,color:t.text}}>{p.friendId===1?'You':f?.name}</p><p style={{margin:'2px 0 0',fontSize:13,color:t.muted}}>ğŸ“ {p.location}</p></div></div></div>}</div>
              {!lock&&<div style={{padding:12,borderTop:`1px solid ${t.border}`,display:'flex',alignItems:'center',gap:8}}><span>ğŸµ</span><span style={{color:t.muted,fontSize:13}}>{p.song.title} - {p.song.artist}</span></div>}
            </div>
          );})}
        </div>
        <nav style={{position:'fixed',bottom:0,left:'50%',transform:'translateX(-50%)',width:'100%',maxWidth:430,padding:'16px 20px 34px',display:'flex',justifyContent:'space-around',alignItems:'center',background:`linear-gradient(transparent,${t.bg})`}}><span style={{fontSize:24,padding:12}}>ğŸ </span><span className="tap" onPointerDown={()=>nav('post')} style={{width:56,height:56,borderRadius:16,display:'flex',alignItems:'center',justifyContent:'center',fontSize:28,color:'#fff',background:t.accent}}>+</span><span className="tap" onPointerDown={()=>nav('profile')} style={{fontSize:24,padding:12,opacity:.5}}>ğŸ‘¤</span></nav>
      </div>}

      {view==='settings'&&<div style={{minHeight:'100vh',background:t.bg,padding:'0 20px'}}>
        <header style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'16px 0'}}><span className="tap" onPointerDown={()=>nav('feed')} style={{fontSize:28,padding:'8px 12px',color:t.text}}>â†</span><span style={{fontWeight:600,color:t.text}}>âš™ï¸ Settings</span><div style={{width:48}}/></header>
        <div style={{display:'flex',alignItems:'center',justifyContent:'space-between',padding:16,borderRadius:16,border:`1px solid ${t.border}`,background:t.card}}><div style={{display:'flex',alignItems:'center',gap:12}}><span style={{fontSize:24}}>{dark?'ğŸŒ™':'â˜€ï¸'}</span><div><p style={{margin:0,fontWeight:600,color:t.text}}>{dark?'Dark':'Light'} mode</p><p style={{margin:'2px 0 0',fontSize:13,color:t.muted}}>Switch appearance</p></div></div><span className="tap" onPointerDown={()=>setDark(!dark)} style={{width:50,height:30,borderRadius:15,padding:3,background:dark?t.accent:t.border,display:'block'}}><div style={{width:24,height:24,borderRadius:12,background:'#fff',transform:dark?'translateX(20px)':'translateX(0)',transition:'transform .3s'}}/></span></div>
      </div>}

      {view==='profile'&&<div style={{minHeight:'100vh',background:t.bg,padding:'0 20px 100px'}}>
        <header style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'16px 0'}}><span className="tap" onPointerDown={()=>nav('feed')} style={{fontSize:28,padding:'8px 12px',color:t.text}}>â†</span><span style={{fontWeight:600,color:t.text}}>Profile</span><div style={{width:48}}/></header>
        <div style={{display:'flex',flexDirection:'column',alignItems:'center',paddingTop:10}}><div style={{width:80,height:80,borderRadius:24,background:t.accent,display:'flex',alignItems:'center',justifyContent:'center',fontSize:28,fontWeight:700,color:'#fff',marginBottom:12}}>Y</div><h2 style={{margin:'0 0 20px',fontSize:22,fontWeight:600,color:t.text}}>You</h2>
          <div style={{display:'flex',gap:24,padding:20,borderRadius:16,border:`1px solid ${t.border}`,width:'100%',background:t.card,marginBottom:20}}><div style={{flex:1,display:'flex',flexDirection:'column',alignItems:'center',gap:4}}><span style={{fontSize:24,fontWeight:700,color:t.text}}>{myPosts.length}</span><span style={{fontSize:13,color:t.muted}}>Postcards</span></div><div style={{flex:1,display:'flex',flexDirection:'column',alignItems:'center',gap:4}}><span style={{fontSize:24,fontWeight:700,color:t.text}}>3</span><span style={{fontSize:13,color:t.muted}}>Friends</span></div><div style={{flex:1,display:'flex',flexDirection:'column',alignItems:'center',gap:4}}><span style={{fontSize:24,fontWeight:700,color:t.text}}>5</span><span style={{fontSize:13,color:t.muted}}>Streak ğŸ”¥</span></div></div>
          <div style={{width:'100%',borderRadius:16,border:`1px solid ${t.border}`,padding:16,background:t.card}}>
            <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:16}}><span className="tap" onPointerDown={()=>setCalDate(new Date(calDate.getFullYear(),calDate.getMonth()-1,1))} style={{fontSize:24,padding:'4px 12px',color:t.text}}>â€¹</span><span style={{fontWeight:600,color:t.text}}>{fmtM(calDate)}</span><span className="tap" onPointerDown={()=>setCalDate(new Date(calDate.getFullYear(),calDate.getMonth()+1,1))} style={{fontSize:24,padding:'4px 12px',color:t.text}}>â€º</span></div>
            <div style={{display:'grid',gridTemplateColumns:'repeat(7,1fr)',marginBottom:8}}>{['S','M','T','W','T','F','S'].map((d,i)=><div key={i} style={{textAlign:'center',fontSize:12,fontWeight:600,padding:8,color:t.muted}}>{d}</div>)}</div>
            <div style={{display:'grid',gridTemplateColumns:'repeat(7,1fr)',gap:4}}>{Array(startD).fill(null).map((_,i)=><div key={`e${i}`}/>)}{Array(daysN).fill(null).map((_,i)=>{const day=i+1;const pfd=getP(day);const isT=isCur&&day===now.getDate();return(<div key={day} className={pfd?"tap":""} onPointerDown={()=>pfd&&(setDayPost(pfd),setView('dayDetail'))} style={{aspectRatio:'1',display:'flex',alignItems:'center',justifyContent:'center',borderRadius:10,background:pfd?t.accent:'transparent',color:pfd?'#fff':t.text,border:isT?`2px solid ${t.accent}`:'none',fontWeight:isT?700:400,flexDirection:'column'}}>{pfd?<><span style={{fontSize:11}}>{day}</span><span style={{fontSize:10}}>ğŸ“®</span></>:<span style={{fontSize:13}}>{day}</span>}</div>);})}</div>
          </div>
        </div>
        <nav style={{position:'fixed',bottom:0,left:'50%',transform:'translateX(-50%)',width:'100%',maxWidth:430,padding:'16px 20px 34px',display:'flex',justifyContent:'space-around',alignItems:'center',background:`linear-gradient(transparent,${t.bg})`}}><span className="tap" onPointerDown={()=>nav('feed')} style={{fontSize:24,padding:12,opacity:.5}}>ğŸ </span><span className="tap" onPointerDown={()=>nav('post')} style={{width:56,height:56,borderRadius:16,display:'flex',alignItems:'center',justifyContent:'center',fontSize:28,color:'#fff',background:t.accent}}>+</span><span style={{fontSize:24,padding:12}}>ğŸ‘¤</span></nav>
      </div>}

      {view==='post'&&<div style={{minHeight:'100vh',padding:'0 20px 40px',background:t.bg}}>
        <header style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'16px 0'}}><span className="tap" onPointerDown={()=>step>1?setStep(step-1):nav('feed')} style={{fontSize:28,padding:'8px 12px',color:t.text}}>â†</span><span style={{fontWeight:600,color:t.text}}>{step===1?'ğŸ“¸ Photos':step===2?'ğŸµ Song of the day':'ğŸ“ Details'}</span><span style={{color:t.muted,padding:'8px 12px'}}>{step}/3</span></header>
        <div style={{display:'flex',justifyContent:'center',gap:8,marginBottom:20}}>{[1,2,3].map(s=><div key={s} style={{width:8,height:8,borderRadius:4,background:s<=step?t.accent:t.border}}/>)}</div>
        {step===1&&<div style={{display:'flex',flexDirection:'column',gap:16}}><p style={{color:t.muted,textAlign:'center',margin:0,fontSize:14}}>Add your photo & outfit</p><div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:12}}>{['photo','outfit'].map((k,i)=>(<div key={k} style={{aspectRatio:'3/4',borderRadius:16,overflow:'hidden',border:`2px dashed ${t.border}`,background:t.card}}><input type="file" accept="image/*" onChange={e=>upload(e,k)} style={{display:'none'}} id={k}/><label htmlFor={k} style={{width:'100%',height:'100%',display:'flex',cursor:'pointer'}}>{np[k]?<img src={np[k]} style={{width:'100%',height:'100%',objectFit:'cover'}}/>:<div style={{width:'100%',height:'100%',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',gap:8}}><span style={{fontSize:36}}>{i?'ğŸ‘•':'ğŸ“·'}</span><span style={{color:t.muted,fontSize:13}}>{i?'Outfit':'Photo'}</span></div>}</label></div>))}</div><span className="tap" onPointerDown={()=>np.photo&&np.outfit&&setStep(2)} style={{color:'#fff',padding:16,borderRadius:14,fontSize:16,fontWeight:600,textAlign:'center',background:t.accent,opacity:np.photo&&np.outfit?1:.4}}>Next â†’</span></div>}
        {step===2&&<div style={{display:'flex',flexDirection:'column',gap:16}}><p style={{color:t.muted,textAlign:'center',margin:0,fontSize:14}}>Song of the day</p><div style={{display:'flex',alignItems:'center',gap:10,padding:14,borderRadius:14,border:`1px solid ${t.border}`,background:t.card}}><span>ğŸµ</span><input placeholder="Song title" value={np.songTitle} onChange={e=>setNp(p=>({...p,songTitle:e.target.value}))} style={{flex:1,background:'transparent',border:'none',fontSize:15,color:t.text}}/></div><div style={{display:'flex',alignItems:'center',gap:10,padding:14,borderRadius:14,border:`1px solid ${t.border}`,background:t.card}}><span>ğŸ¤</span><input placeholder="Artist name" value={np.songArtist} onChange={e=>setNp(p=>({...p,songArtist:e.target.value}))} style={{flex:1,background:'transparent',border:'none',fontSize:15,color:t.text}}/></div>{np.songTitle&&np.songArtist&&<div style={{display:'flex',alignItems:'center',gap:12,padding:14,borderRadius:14,border:`1px solid ${t.border}`,background:t.card}}><div style={{width:44,height:44,borderRadius:12,background:t.accent,display:'flex',alignItems:'center',justifyContent:'center',fontSize:20}}>ğŸµ</div><div><p style={{margin:0,fontWeight:600,color:t.text}}>{np.songTitle}</p><p style={{margin:'4px 0 0',fontSize:14,color:t.muted}}>{np.songArtist}</p></div></div>}<div style={{display:'flex',gap:12,marginTop:'auto'}}><span className="tap" onPointerDown={()=>setStep(1)} style={{padding:'14px 20px',border:`1px solid ${t.border}`,borderRadius:12,fontSize:14,fontWeight:500,color:t.text,textAlign:'center'}}>â† Back</span><span className="tap" onPointerDown={()=>np.songTitle&&np.songArtist&&setStep(3)} style={{flex:1,color:'#fff',padding:16,borderRadius:14,fontSize:16,fontWeight:600,textAlign:'center',background:t.accent,opacity:np.songTitle&&np.songArtist?1:.4}}>Next â†’</span></div></div>}
        {step===3&&<div style={{display:'flex',flexDirection:'column',gap:16}}><div style={{display:'flex',alignItems:'center',gap:10,padding:14,borderRadius:14,border:`1px solid ${t.border}`,background:t.card}}><span>ğŸ“</span><input placeholder="Where are you?" value={np.loc} onChange={e=>setNp(p=>({...p,loc:e.target.value}))} style={{flex:1,background:'transparent',border:'none',fontSize:15,color:t.text}}/></div><div style={{display:'flex',alignItems:'center',gap:10,padding:14,borderRadius:14,border:`1px solid ${t.border}`,background:t.card}}><span>ğŸ’¬</span><input placeholder="Quote (optional)" value={np.quote} onChange={e=>setNp(p=>({...p,quote:e.target.value}))} style={{flex:1,background:'transparent',border:'none',fontSize:15,color:t.text}}/></div><div style={{padding:16,borderRadius:16,border:`1px solid ${t.border}`,background:t.card}}><p style={{color:t.muted,fontSize:13,margin:'0 0 12px'}}>Your postcard âœ‰ï¸</p><div style={{display:'grid',gridTemplateColumns:'2fr 1fr',gap:8,marginBottom:12}}><img src={np.photo} style={{width:'100%',aspectRatio:'1',objectFit:'cover',borderRadius:10}}/><img src={np.outfit} style={{width:'100%',height:'100%',objectFit:'cover',borderRadius:10}}/></div><div style={{display:'flex',alignItems:'center',gap:10,padding:10,borderRadius:10,background:t.bg}}><span>ğŸµ</span><span style={{color:t.text,fontSize:13}}>{np.songTitle} - {np.songArtist}</span></div>{np.quote&&<p style={{color:t.muted,fontSize:13,fontStyle:'italic',margin:'8px 0 0'}}>"{np.quote}"</p>}</div><div style={{display:'flex',gap:12,marginTop:'auto'}}><span className="tap" onPointerDown={()=>setStep(2)} style={{padding:'14px 20px',border:`1px solid ${t.border}`,borderRadius:12,fontSize:14,fontWeight:500,color:t.text,textAlign:'center'}}>â† Back</span><span className="tap" onPointerDown={submit} style={{flex:1,color:'#fff',padding:16,borderRadius:14,fontSize:16,fontWeight:600,textAlign:'center',background:t.accent,opacity:np.loc?1:.4}}>Send âœˆï¸</span></div></div>}
      </div>}

      {view==='detail'&&sel&&<div style={{minHeight:'100vh',background:t.bg,paddingTop:16}}>
        <span className="tap" onPointerDown={()=>nav('feed')} style={{position:'absolute',top:16,right:16,width:36,height:36,borderRadius:12,fontSize:16,display:'flex',alignItems:'center',justifyContent:'center',background:t.card,color:t.text,zIndex:10}}>âœ•</span>
        <div style={{padding:16}}><div style={{borderRadius:20,overflow:'hidden',border:`1px solid ${t.border}`,background:t.card}}><div style={{position:'relative'}}><img src={sel.photo} style={{width:'100%',aspectRatio:'1',objectFit:'cover'}}/><div style={{position:'absolute',top:12,right:12,background:'#fff',padding:'8px 14px',borderRadius:8,fontSize:13,fontWeight:600}}>ğŸ“ {sel.location.split(',')[0]}</div></div><div style={{position:'relative',padding:12}}><img src={sel.outfitPhoto} style={{width:'100%',aspectRatio:'3/4',objectFit:'cover',borderRadius:12}}/><div style={{position:'absolute',top:20,left:20,color:'#fff',padding:'6px 10px',borderRadius:6,fontSize:11,fontWeight:600,background:t.accent}}>OOTD</div></div>{sel.quote&&<div style={{margin:'0 12px 12px',padding:14,borderRadius:12,background:t.bg}}><p style={{margin:0,color:t.text,fontStyle:'italic',textAlign:'center'}}>"{sel.quote}"</p></div>}<div style={{display:'flex',alignItems:'center',gap:12,margin:'0 12px 12px',padding:12,borderRadius:12,border:`1px solid ${t.border}`,background:t.bg}}><div style={{width:44,height:44,borderRadius:12,background:t.accent,display:'flex',alignItems:'center',justifyContent:'center',fontSize:20}}>ğŸµ</div><div><p style={{margin:0,fontWeight:600,color:t.text}}>{sel.song.title}</p><p style={{margin:'2px 0 0',fontSize:13,color:t.muted}}>{sel.song.artist}</p></div></div><div style={{display:'flex',alignItems:'center',gap:12,padding:14,borderTop:`1px solid ${t.border}`}}><div style={{width:40,height:40,borderRadius:12,background:fr(sel.friendId)?.color,display:'flex',alignItems:'center',justifyContent:'center',fontSize:14,fontWeight:600,color:'#fff'}}>{fr(sel.friendId)?.initials}</div><div><p style={{margin:0,fontWeight:600,color:t.text}}>{sel.friendId===1?'You':fr(sel.friendId)?.name}</p><p style={{margin:'2px 0 0',fontSize:13,color:t.muted}}>{sel.location}</p></div></div></div>
        {sel.friendId!==1&&<div style={{marginTop:16}}>{sel.reactions.length>0&&<div style={{display:'flex',flexWrap:'wrap',gap:8,marginBottom:12}}>{sel.reactions.map((r,i)=><div key={i} style={{display:'flex',alignItems:'center',gap:6,padding:'8px 12px',borderRadius:20,border:`1px solid ${t.border}`,background:t.card}}><span style={{fontSize:18}}>{r.emoji}</span><span style={{fontSize:13,color:t.muted}}>{r.friendId===1?'You':fr(r.friendId)?.name}</span></div>)}</div>}{showRx===sel.id?<div style={{display:'flex',gap:4,padding:8,borderRadius:20,border:`1px solid ${t.border}`,background:t.card}}>{RX.map(e=><span key={e} className="tap" onPointerDown={()=>react(sel.id,e)} style={{width:40,height:40,display:'flex',alignItems:'center',justifyContent:'center',fontSize:22,borderRadius:10}}>{e}</span>)}</div>:<span className="tap" onPointerDown={()=>setShowRx(sel.id)} style={{display:'inline-flex',alignItems:'center',gap:8,padding:'10px 16px',border:`1px solid ${t.border}`,borderRadius:20,fontSize:14,background:t.card,color:t.text}}>+ React</span>}</div>}</div>
      </div>}

      {view==='dayDetail'&&dayPost&&<div style={{minHeight:'100vh',background:t.bg,paddingTop:16}}>
        <span className="tap" onPointerDown={()=>{setView('profile');setDayPost(null);}} style={{position:'absolute',top:16,right:16,width:36,height:36,borderRadius:12,fontSize:16,display:'flex',alignItems:'center',justifyContent:'center',background:t.card,color:t.text,zIndex:10}}>âœ•</span>
        <div style={{padding:16}}><div style={{borderRadius:20,overflow:'hidden',border:`1px solid ${t.border}`,background:t.card}}><div style={{position:'relative'}}><img src={dayPost.photo} style={{width:'100%',aspectRatio:'1',objectFit:'cover'}}/><div style={{position:'absolute',top:12,right:12,background:'#fff',padding:'8px 14px',borderRadius:8,fontSize:13,fontWeight:600}}>ğŸ“ {dayPost.location.split(',')[0]}</div></div><div style={{position:'relative',padding:12}}><img src={dayPost.outfitPhoto} style={{width:'100%',aspectRatio:'3/4',objectFit:'cover',borderRadius:12}}/><div style={{position:'absolute',top:20,left:20,color:'#fff',padding:'6px 10px',borderRadius:6,fontSize:11,fontWeight:600,background:t.accent}}>OOTD</div></div>{dayPost.quote&&<div style={{margin:'0 12px 12px',padding:14,borderRadius:12,background:t.bg}}><p style={{margin:0,color:t.text,fontStyle:'italic',textAlign:'center'}}>"{dayPost.quote}"</p></div>}<div style={{display:'flex',alignItems:'center',gap:12,margin:'0 12px 12px',padding:12,borderRadius:12,border:`1px solid ${t.border}`,background:t.bg}}><div style={{width:44,height:44,borderRadius:12,background:t.accent,display:'flex',alignItems:'center',justifyContent:'center',fontSize:20}}>ğŸµ</div><div><p style={{margin:0,fontWeight:600,color:t.text}}>{dayPost.song.title}</p><p style={{margin:'2px 0 0',fontSize:13,color:t.muted}}>{dayPost.song.artist}</p></div></div><div style={{display:'flex',alignItems:'center',gap:12,padding:14,borderTop:`1px solid ${t.border}`}}><div style={{width:40,height:40,borderRadius:12,background:t.accent,display:'flex',alignItems:'center',justifyContent:'center',fontSize:14,fontWeight:600,color:'#fff'}}>Y</div><div style={{flex:1}}><p style={{margin:0,fontWeight:600,color:t.text}}>You</p><p style={{margin:'2px 0 0',fontSize:13,color:t.muted}}>{dayPost.location}</p></div><span style={{fontSize:13,color:t.muted}}>{new Date(dayPost.date).toLocaleDateString('en-US',{month:'short',day:'numeric'})}</span></div></div></div>
      </div>}
    </div>
  );
}
ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>